<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Хамстер Комбат</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            text-align: center;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }
        .container:hover {
            transform: scale(1.05);
        }
        button {
            padding: 15px 25px;
            margin-top: 20px;
            border: none;
            border-radius: 5px;
            background-color: #4CAF50;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .hidden {
            display: none;
        }
        .store-item {
            margin: 15px 0;
        }
        #bonus-message {
            color: #ff0000;
            font-size: 20px;
            margin-top: 10px;
        }
        .hamster-container {
            width: 200px; /* Ширина картинки */
            height: 200px; /* Высота картинки */
            margin: 0 auto; /* Центрирование */
            cursor: pointer;
            border: 2px solid black; /* Добавляем рамку к картинке */
            border-radius: 50%;    /* Делаем картинку круглой */
            overflow: hidden; /* Обрезаем все, что выходит за рамку */

        }

        .hamster-container img{ /* Стили картинки */

          width: 100%; /* Занимаем всю ширину родителя */
          height: 100%; /* Занимаем всю высоту родителя */
         object-fit: cover;


         }
        .hidden {
             display: none;

            }

            #upgrade-superClick, #upgrade-bonusTime {   /*   для суперклика  и бонусного времени */

        display: none;   /*  Прячем кнопку купить, она появится  после  покупки автокликера */

            }
             #autoClickerUpgrades{

                display: none;   /*  прячем блок суперклика и бонусного времени */

           }



    </style>
</head>
<body>
    <div class="container">
        <h1>Хамстер Комбат</h1>
         <div class="hamster-container">  <img src="hamster.jpg" alt="Hamster">  </div>
        <p>Ваш счёт: <span id="score">0</span></p>
        <button id="open-store">Открыть магазин</button>

        <div id="store" class="hidden">
            <h2>Магазин улучшений</h2>
            <div class="store-item">
                <div id = upgrade-autoClicker>
                   <h3>autoClicker</h3> <p>Effect: 1,  level : 0</p>
                    <button id = "btn-autoClicker">Купить за 10</button>

                 </div>
           </div>
           <div id = autoClickerUpgrades>   <!-- Скрываем  -->

             <div class="store-item">
                <div id="upgrade-superClick">
                   <h3>superClick</h3> <p>Bonus Duration: 5000</p>
                   <button id="btn-superClick" data-cost ="100"> Купить за 100 </button>

                 </div>


           </div>
             <div class="store-item">

                  <div id="upgrade-bonusTime">
                     <h3>bonusTime</h3> <p>Bonus Duration : 10000, level: 0 </p>

                  <button id = "btn-bonusTime"> Купить за 200</button>

                    </div>

            </div>
            </div>

            <div class="store-item">
                  <div id = upgrade-multiplier>
                       <h3>multiplier</h3> <p>Effect : 1 , level: 0</p>

                        <button id="btn-multiplier"  data-cost ="50">Купить за 50 </button>
                </div>

            </div>




        </div>
        <div id="bonus-message" class="hidden">Бонус!</div>
    </div>
    <script>


document.addEventListener('DOMContentLoaded', (event) => {

 let score = 0;


  let upgrades = {



        "autoClicker": { cost: 10, owned: 0, effect: 1 },

        "multiplier": { cost: 50, owned: 0, effect: 1 },


         "superClick": { cost: 100, owned:0,  duration: 5000,active:false },



    "bonusTime": { cost: 200, owned:0, duration: 10000 }

    };
     let clickMultiplier = 1

      let autoClickerInterval ;

  loadGame();


    const hamsterContainer = document.querySelector('.hamster-container');

hamsterContainer.addEventListener("click", clickHamster)



  function updateScoreDisplay() {



       document.getElementById('score').textContent = score;

 }

 function checkForBonus() {  // бонусы

 }


  function checkForMilestones(){  // достижения, которые выводят алерт


 }



    function renderShopItem(upgradeId, name, description, cost) {

        let upgradeItem = document.getElementById(`upgrade-${upgradeId}`);   // получаем  div

      upgradeItem.innerHTML = `<h3>${name}</h3> <p>${description}</p> <button id = 'btn-${upgradeId}' data-upgrade = '${upgradeId}' data-cost = '${cost}'>Купить за ${cost}</button>`;  //   рендерим  кнопку и  описание




   }



    function  updateShop(upgradeId) {
       const {cost, owned, effect, duration, active } = upgrades[upgradeId] //   получаем  данные



   let   description


       switch (upgradeId){

        case  "multiplier":



                    description =  `Effect :  ${effect} , level :  ${owned}`


                break;
             case 'autoClicker' :

               description =   `Effect:  ${effect}, level:  ${owned}`



                break;



           case   "superClick":



                   description =  `Bonus Duration:  ${duration}`

              break;

            case   "bonusTime":

               description =  `Bonus Duration : ${duration} ,  level:  ${owned}`



        default:
                   description=''


                break;



       }



         renderShopItem(upgradeId, upgradeId ,description ,cost )
          attachShopListeners()


  }

    function renderShop(){ // один раз  вызываетя, при  первичном открытии магазина


          for (const upgrade in upgrades){  // рендерим  все  апгрейды


         const{cost, description, effect} = upgrades[upgrade]

         renderShopItem(upgrade, upgrade , `Effect:  ${effect}  , level: 0`,cost )



          }
      attachShopListeners();  //  обработчики  для кнопок  магазина


 }



function  clickHamster() {
 let clickValue = upgrades.multiplier.effect

         if (upgrades.superClick.active) {



                clickValue*=2


  }

          score += clickValue


updateScoreDisplay();


   }

 function startAutoClicker() {


    autoClickerInterval = setInterval(() => {  // Автокликер  работает, если куплен хотя бы 1  раз


          score += upgrades.autoClicker.owned * upgrades.autoClicker.effect * upgrades.multiplier.effect


    updateScoreDisplay();
 saveGame();

}, 1000);



}

function startSuperClick(){    //    активируем   Суперклик  после  покупки  autoclicker  (кнопка buy-autoClicker)

            upgrades.superClick.active= true




  setTimeout(() => {      // через    5 сек   выключаем


                    upgrades.superClick.active = false




       }, upgrades.superClick.duration)


   }


   function buyUpgrade(upgradeId) {


        const  upgrade = upgrades[upgradeId]



        const  cost =   Number(document.getElementById(`btn-${upgradeId}`).dataset.cost)  //   берем  cost   из  кнопки, которая  была   нажата




       if (score >= cost) {   // проверяем хватает ли очков на покупку




          score -= cost;




            upgrades[upgradeId].owned++;   //   увеличиваем   level   апгрейда




             if(upgradeId==="autoClicker" ){


                  startAutoClicker()   //    включаем  автокликер

                   if(document.getElementById('autoClickerUpgrades').style.display ==="none" ){    //   показываем  кнопку  покупки  суперклика и бонусного  времени



           document.getElementById('autoClickerUpgrades').style.display = "block"


                     document.getElementById('upgrade-superClick').style.display = 'block'

                     document.getElementById('upgrade-bonusTime').style.display='block'

                    }



                if(!autoClickerInterval)  {  //  если  первый  раз  запускаем

                  startAutoClicker();

               }

        } else if( upgradeId ==='bonusTime') { //   увеличивает время работы  autoClicker


              clearInterval(autoClickerInterval)      // сбрасываем текущий  autoClicker
                   autoClickerInterval = null            //  чтобы  не было   2   интервала




             autoClickerInterval =  setInterval(()=>{


           score += (upgrades.autoClicker.owned * upgrades.autoClicker.effect  + (upgrades.bonusTime.owned ))  *   upgrades.multiplier.effect     // увеличиваем   эффективность autoClicker   на  level   bonusTime   *  multiplier





           updateScoreDisplay()


  saveGame();


            }, 1000)






        }  else  if(upgradeId ==='superClick'  ) {



                  startSuperClick();


                if (!autoClickerInterval){  // если первый  запуск, включаем


                  startAutoClicker();

            }


 }

             else if (upgradeId ==='multiplier'){   //   если  купили множитель

        }
          updateShop(upgradeId)



           updateScoreDisplay()





    }else{




                 showMessage('Not enough points');


            }


    }




   function attachShopListeners(){


  const buttons = document.querySelectorAll('[data-upgrade]')   //    находим   все кнопки  по  data атрибуту


          buttons.forEach((btn) => {                                          //     вешаем обработчик




      btn.addEventListener('click', () =>{





             buyUpgrade(btn.dataset.upgrade);

               updateScoreDisplay();


saveGame()

                 });



   })


     }






 function loadGame() {




        const savedGame = localStorage.getItem('hamsterCombatSave'); // Получаем сохраненную игру из localStorage



 if (savedGame) {




            const gameData = JSON.parse(savedGame);



            score = gameData.score || 0;    //   восстанавливаем  игру


              upgrades = gameData.upgrades || {      // upgrades   будут   те   же


                autoClicker :  { cost: 10, owned: 0, effect: 1 },

                   multiplier:  { cost: 50, owned: 0, effect: 1 },


                   superClick:{ cost: 100, duration:5000, active: false},


              bonusTime: {cost: 200,  duration:10000, owned:0}
}



   if(upgrades.autoClicker.owned > 0){


 startAutoClicker()

                    document.getElementById('autoClickerUpgrades').style.display ="block";   //   показываем блок



                document.getElementById('upgrade-superClick').style.display = "block"


                document.getElementById('upgrade-bonusTime').style.display= 'block'





           }


   renderShop()          // отображаем upgrade



        updateScoreDisplay();      //    обновляем очки на  странице



       }



   else {


                renderShop()        //  рендерим  счет


   }

    }


  function saveGame(){    //  сохранение



           const gameData = {




               score,

           upgrades




        };





  localStorage.setItem("hamsterCombatSave", JSON.stringify(gameData))


    }




     const openStoreButton = document.getElementById('open-store');    // обработчик открытия/закрытия магазина


 openStoreButton.addEventListener('click', () => {




        const  store = document.getElementById('store')




        store.classList.toggle('hidden')



});



 if(!autoClickerInterval) {        //   чтобы   не запускать  несколько    setInterval


         startAutoClicker();

   }




         loadGame();   // загружаем  игру  при  загрузке  страницы




})




      </script>


</body>


</html>
